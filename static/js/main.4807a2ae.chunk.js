(this["webpackJsonpbird-map-react"]=this["webpackJsonpbird-map-react"]||[]).push([[0],{60:function(e,t,c){},61:function(e,t,c){},68:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},76:function(e,t,c){"use strict";c.r(t);var n=c(2),i=c.n(n),a=c(26),s=c.n(a),o=(c(60),c(61),c(14)),r="SET_ALL_PLACES",l="SET_SELECTED_PLACE",u="SET_PLACE_PREVIEW_VISIBILITY",d="SET_PLACE_FORM_VISIBILITY",b="SET_PRE_PLACE_LOCATION",j="ADD_NEW_PLACE",p=function(e){return{type:l,payload:e}},O=function(e){return{type:u,payload:e}},h=function(e){return{type:d,payload:e}},f="SET_SEARCH_VISIBILITY",m=function(e){return{type:f,payload:e}},v=(c(68),c(48)),_=c(5),x=Object(o.b)((function(e){return e.search}),(function(e){return{setSearchVisibility:function(t){return e(m(t))}}}))((function(e){var t=e.searchIsVisible,c=e.setSearchVisibility;return Object(_.jsxs)("div",{className:"header__container",children:[Object(_.jsx)(v.a,{style:{fontSize:"3rem",verticalAlign:"middle",position:"absolute",left:"1rem",top:"10px"},onClick:function(){return c(!t)}}),Object(_.jsx)("span",{children:"Where are the Green Parrots?"})]})})),g=c(11),I=c(77),P=c(78),S=c(79),w=c(80),y=c(84),N=c(81),E=c(82),V=c(83),T=Object(o.b)((function(e){return{formIsOpen:e.places.placeFormIsVisible}}),(function(e){return{toggleForm:function(t){return e(h(t))},setLocation:function(t){return e(function(e){return{type:b,payload:e}}(t))}}}))((function(e){var t=e.formIsOpen,c=e.toggleForm,i=e.setLocation,a=Object(n.useState)(null),s=Object(g.a)(a,2),o=s[0],r=s[1];return Object(I.b)({click:function(e){r(e.latlng),i(e.latlng),c(!0)}}),t&&null!==o?Object(_.jsx)(P.a,{position:o}):null})),L=c(13),k=c.n(L).a.icon({iconSize:[25,41],iconAnchor:[10,41],popupAnchor:[2,-40],iconUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-shadow.png"}),F=(c(70),Object(o.b)((function(e){var t=e.places;return{isVisible:t.placePreviewsIsVisible,places:t.places,selectedPlace:t.selectedPlace}}),(function(e){return{togglePreview:function(t){return e(O(t))},setPlaceForPreview:function(t){return e(p(t))}}}))((function(e){var t=e.isVisible,c=e.places,i=e.selectedPlace,a=e.togglePreview,s=e.setPlaceForPreview,o=[30.2672,-97.7431],r=Object(n.useState)([]),l=Object(g.a)(r,2),u=l[0],d=l[1];function b(){var e=Object(n.useState)(o),t=Object(g.a)(e,2),c=t[0],i=t[1],a=Object(I.a)();return Object(n.useEffect)((function(){a.locate().on("locationfound",(function(e){i(e.latlng),a.flyTo(e.latlng,a.getZoom())}))}),[a]),null===c?null:Object(_.jsx)(P.a,{position:c,icon:k,children:Object(_.jsxs)(S.a,{children:["You are here. ",Object(_.jsx)("br",{})]})})}Object(n.useEffect)((function(){d(c.reduce((function(e,t){return e.push(t.position),e}),[]))}),[c]);var j=function(e){s(e),a(!0)};return Object(_.jsx)("div",{className:"map__container",children:Object(_.jsxs)(w.a,{center:o,zoom:20,scrollWheelZoom:!0,style:{height:"100vh"},zoomControl:!1,children:[Object(_.jsx)(y.a,{url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',maxZoom:20,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoidWx6aGFuZyIsImEiOiJja3R5eHZxMTMwMnl3MnhxZ2JyYzYzcmpzIn0.nw7l6ZxMbKNsVzy1mjMNJQ"}),Object(_.jsx)(N.a,{positions:u}),c.map((function(e){return Object(_.jsx)(P.a,{position:e.position,eventHandlers:{click:function(){return function(e){t&&(a(!1),s(null)),(null===i||void 0===i?void 0:i.location)!==e.location&&setTimeout((function(){j(e)}),400)}(e)}},children:Object(_.jsx)(E.a,{children:e.location})},e.location)})),Object(_.jsx)(T,{}),Object(_.jsx)(V.a,{position:"topleft",zoomInText:"+",zoomOutText:"-"}),Object(_.jsx)(b,{})]})})}))),C=c(49),D=(c(71),Object(o.b)((function(e){var t=e.search,c=e.places;return{searchIsVisible:t.searchIsVisible,places:c.places}}),(function(e){return{closeSearch:function(){return e(m(!1))},setSelectedPlace:function(t){e(p(t)),e(O(!0))}}}))((function(e){var t=e.searchIsVisible,c=e.places,n=e.closeSearch,i=e.setSelectedPlace;return console.log(c),Object(_.jsxs)("div",{className:"search__container search__container--".concat(t&&"active"),children:[Object(_.jsxs)("div",{className:"search__header",children:[Object(_.jsx)("span",{className:"search__header__close",role:"button",onClick:function(){return n()},children:Object(_.jsx)(C.a,{})}),Object(_.jsx)("span",{className:"search__header__title",children:"Search"})]}),Object(_.jsx)("div",{className:"search__list",children:c.map((function(e){return Object(_.jsxs)("div",{className:"search__list__item",style:{background:"#00B140"},onClick:function(){return i(e)},children:[e.location,e.date]},e.location)}))})]})}))),z=c(36),A=(c(72),Object(o.b)((function(e){var t=e.places;return{isVisible:t.placePreviewsIsVisible,place:t.selectedPlace}}),(function(e){return{closePreview:function(){return e(O(!1))}}}))((function(e){var t=e.isVisible,c=e.place,n=e.closePreview;return Object(_.jsxs)("div",{className:"preview__container preview__container--".concat(t&&c&&"active"),children:[Object(_.jsx)("div",{className:"preview__close",onClick:function(){return n()},children:Object(_.jsx)(z.a,{})}),Object(_.jsxs)("div",{className:"preview__description__container",children:[Object(_.jsx)("h1",{children:"Location"}),Object(_.jsx)("div",{className:"preview__location",children:null===c||void 0===c?void 0:c.location}),Object(_.jsx)("h1",{children:"Date"}),Object(_.jsx)("div",{className:"preview__date",children:null===c||void 0===c?void 0:c.date}),Object(_.jsx)("h1",{children:"Description"}),Object(_.jsx)("div",{className:"preview__description",children:null===c||void 0===c?void 0:c.description}),Object(_.jsx)("h1",{children:"Position"}),Object(_.jsx)("div",{className:"preview__latlng",children:null===c||void 0===c?void 0:c.position})]})]})}))),R=c(6),B=c(7),G=(c(73),c(34)),M=c(52),Z=c(19);Object(M.a)({apiKey:"AIzaSyDafTBcwBZ9g7nnzvQYW1m644ZV_sRTvJQ",authDomain:"bird-maps-1.firebaseapp.com",databaseURL:"https://bird-maps-1-default-rtdb.firebaseio.com",projectId:"bird-maps-1",storageBucket:"bird-maps-1.appspot.com",messagingSenderId:"460361909334",appId:"1:460361909334:web:9e8db450c35df6e9bda7f7",measurementId:"G-K6PPGQL6T2"});var J=Object(o.b)((function(e){var t=e.places;return{isVisible:t.placeFormIsVisible,position:t.prePlacePosition}}),(function(e){return{closeForm:function(){return e(h(!1))},addNewPlace:function(t){e({type:j,payload:t})}}}))((function(e){var t=e.isVisible,c=e.position,n=e.closeForm,i=e.addNewPlace;return Object(_.jsxs)("div",{className:"form__container form__container--".concat(t&&"active"),children:[Object(_.jsxs)("div",{className:"form__header",children:[Object(_.jsx)("span",{className:"form__header__close",role:"button",onClick:function(){return n()},children:Object(_.jsx)(z.a,{})}),Object(_.jsx)("span",{className:"form__header__title",children:"Add new Place"})]}),Object(_.jsx)(G.c,{initialValues:{location:"",description:""},validate:function(e){return Object.keys(e).reduce((function(t,c){return e[c]?t:Object(B.a)(Object(B.a)({},t),{},Object(R.a)({},c,"required"))}),{})},onSubmit:function(e){var t=Date.now();i(Object(B.a)(Object(B.a)({},e),{},{position:[c.lat,c.lng],date:new Date(t).toString()})),function(e,t,c,n){var i=Object(Z.c)();t=t||"test",Object(Z.e)(Object(Z.d)(i,"sighting/"+n.toString()+"/"),{date:new Date(n).toString(),LatLng:e,location:t,description:c}),console.log("when: "+n.toString()+" where: "+e)}(c,e.location,e.description,t),n()},children:function(e){var t=e.errors;e.touched,e.isValidating;return Object(_.jsxs)(G.b,{children:[Object(_.jsxs)("div",{className:"formGroup",children:[Object(_.jsxs)("div",{className:"formGroupInput",children:[Object(_.jsx)("label",{htmlFor:"location",children:"Location"}),Object(_.jsx)(G.a,{id:"location",name:"location",placeholder:"Neighborhood?"})]}),t.location&&Object(_.jsx)("div",{className:"errors",children:"Required"})]}),Object(_.jsxs)("div",{className:"formGroup",children:[Object(_.jsxs)("div",{className:"formGroupInput",children:[Object(_.jsx)("label",{htmlFor:"description",children:"Description"}),Object(_.jsx)(G.a,{id:"description",name:"description",placeholder:"General observation notes..."})]}),t.description&&Object(_.jsx)("div",{className:"errors",children:"Required"})]}),Object(_.jsx)("div",{className:"button__container",children:Object(_.jsx)("button",{className:"form__button",type:"submit",children:"Submit"})})]})}})]})}));var Y=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("nav",{children:Object(_.jsx)(x,{})}),Object(_.jsxs)("main",{children:[Object(_.jsx)(D,{}),Object(_.jsx)(F,{}),Object(_.jsx)(A,{}),Object(_.jsx)(J,{})]})]})},W=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,85)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),i(e),a(e),s(e)}))},U=c(41),Q=c(42),X=Object(Z.d)(Object(Z.c)());Object(Z.b)(Object(Z.a)(X,"users/1")).then((function(e){e.exists()?console.log(e.val()):console.log("No data available")})).catch((function(e){console.error(e)}));var q,H,K={places:[],selectedPlace:null,placePreviewsIsVisible:!1,placeFormIsVisible:!1,prePlacePosition:null},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r:return Object(B.a)(Object(B.a)({},e),{},{places:t.payload});case l:return Object(B.a)(Object(B.a)({},e),{},{selectedPlace:t.payload});case u:return Object(B.a)(Object(B.a)({},e),{},{placePreviewsIsVisible:t.payload});case d:return Object(B.a)(Object(B.a)({},e),{},{placeFormIsVisible:t.payload});case b:return Object(B.a)(Object(B.a)({},e),{},{prePlacePosition:t.payload});case j:return Object(B.a)(Object(B.a)({},e),{},{places:[].concat(Object(Q.a)(e.places),[t.payload])});default:return e}},ee={searchIsVisible:!1},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;return t.type===f?Object(B.a)(Object(B.a)({},e),{},{searchIsVisible:t.payload}):e},ce=Object(U.a)({places:$,search:te}),ne=Object(U.b)(ce,(null===(q=window)||void 0===q?void 0:q.__REDUX_DEVTOOLS_EXTENSION__)&&(null===(H=window)||void 0===H?void 0:H.__REDUX_DEVTOOLS_EXTENSION__()));s.a.render(Object(_.jsx)(i.a.StrictMode,{children:Object(_.jsx)(o.a,{store:ne,children:Object(_.jsx)(Y,{})})}),document.getElementById("root")),W()}},[[76,1,2]]]);
//# sourceMappingURL=main.4807a2ae.chunk.js.map